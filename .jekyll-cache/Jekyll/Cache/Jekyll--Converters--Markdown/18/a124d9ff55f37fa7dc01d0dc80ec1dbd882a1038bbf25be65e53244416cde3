I"Ÿ<p><a href="https://arxiv.org/pdf/1706.02677.pdf">Paper link</a></p>

<h4 id="take-away-message">Take away message</h4>
<ol>
  <li>å½“æ»¡è¶³ä¸€å®šæ¡ä»¶ä¸‹ï¼Œbatch_sizeå¢å¤§kå€æ—¶ï¼Œlrå¯ä»¥ç›´æ¥ç›¸åº”å¢å¤§kå€</li>
  <li>è®­ç»ƒåˆæœŸä¸æ»¡è¶³1)æ‰€éœ€çš„æ¡ä»¶ï¼Œæ­¤æ—¶lréœ€è¦ä½¿ç”¨warm up</li>
  <li>underlying loss functionå—batch sizeå½±å“ã€‚ä¸ºäº†ä¸æ”¹å˜underlying loss functionï¼Œåœ¨å¢å¤§batch_sizeæ—¶ï¼Œå…¶å®å¹¶ä¸æ˜¯æ”¹å˜per-worker sample size nï¼Œè€Œæ˜¯å¢å¤§the number of workers k</li>
</ol>

<h4 id="linear-scaling-rule">Linear Scaling Rule</h4>
<p>è®¾æœ‰ k ä¸ªmini-batch $B_0, \cdots, B_{k-1}$:</p>
<ol>
  <li>$lr=\eta$, ä½¿ç”¨å°batch_size $B_j$è®­ç»ƒï¼Œå…±è®­ k ä¸ªiterationï¼ˆ$j=0, \cdots, k-1$ï¼‰ï¼š<br />
 <img src="/img/15906983171534.jpg" width="40%" height="100%" /></li>
  <li>$lr = \hat{\eta}$, ä½¿ç”¨å¤§batch-size $\cup_j{B_j}$è®­ä¸€ä¸ªiterationï¼š
 <img src="/img/15906986727563.jpg" width="40%" height="100%" /></li>
</ol>

<p>1å’Œ2å¯¹åº”ä¸åŒçš„æ›´æ–°æ–¹å¼ï¼Œå› æ­¤ä¸å¤ªå¯èƒ½æœ‰$\hat w_{t+1} = w_{t+k}$ã€‚ä½†æ˜¯ï¼Œ<strong>å¦‚æœæˆ‘ä»¬å‡è®¾$\nabla l(x,w_t) \approx \nabla l(x,w_{t+j})$ for $j &lt; k$ï¼Œé‚£ä¹ˆåœ¨ $\hat \eta =k\eta$ æ¡ä»¶ä¸‹èƒ½æ¨å‡º $\hat w_{t+1} \approx  w_{t+k}$ï¼Œå³ä½¿ç”¨ä¸åŒbatch-sizeå¾—åˆ°ç›¸ä¼¼çš„æ›´æ–°ç»“æœ</strong>ã€‚</p>

<h4 id="warm-up">Warm up</h4>
<p>åœ¨è®­ç»ƒçš„å¼€å§‹é˜¶æ®µï¼Œæ¨¡å‹æƒé‡è¿…é€Ÿæ”¹å˜ï¼Œä¸æ»¡è¶³linear scaling ruleä¸­çš„æ¡ä»¶ã€‚æ­¤æ—¶ä½¿ç”¨gradual warmupæœ‰åŠ©äºè§£å†³è®­ç»ƒä¸­å‡ºç°çš„é—®é¢˜ã€‚</p>

<h4 id="batch-normalization">Batch normalization</h4>
<p>å¦‚æœæœ‰BNå±‚ï¼Œé‚£ä¹ˆæ¯ä¸ªsampleçš„losså…¶å®å¹¶ä¸æ˜¯ç‹¬ç«‹çš„ï¼Œè€Œæ˜¯ä¸å…¶æ‰€åœ¨çš„mini-batchæœ‰å…³ï¼ˆå› ä¸ºä¼šæ ¹æ®æ¯ä¸ªmini-batchçš„mean/stdåšnormalizationï¼‰ã€‚ç”±äºä¸åŒçš„mini-batch sizeä¼šå¯¼è‡´ä¸åŒçš„mean/variance statistics distributionï¼Œå› æ­¤æ”¹å˜mini-batch sizeä¼šæ”¹å˜underlying loss functionã€‚</p>

<p>ä¸ºäº†ä¸æ”¹å˜underlying loss functionï¼Œæ ¹æ®ä¸Šè¿°åˆ†æï¼Œåœ¨å¢å¤§mini-batch sizeæ—¶ï¼Œæˆ‘ä»¬å…¶å®ä¸åº”è¯¥æ”¹å˜per-worker sample size nï¼ˆbatch statisticsæ˜¯åœ¨æ¯ä¸ªworkerä¸Šå•ç‹¬è®¡ç®—çš„ï¼‰ï¼Œè€Œæ˜¯åº”è¯¥å¢å¤§the number of workers kã€‚é€šå¸¸n=32åœ¨å¤§éƒ¨åˆ†æ•°æ®é›†å’Œç½‘ç»œä¸Šéƒ½è¡¨ç°è‰¯å¥½ã€‚</p>

:ET